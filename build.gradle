apply plugin : 'java'
apply plugin : 'application'
apply plugin : 'eclipse'

mainClassName = 'com.anor.roar.whenzint.Whenz'

repositories {
  mavenCentral()
}

sourceSets {
	main {
		java {
			srcDirs = ['src']
		}
	}
	test {
		java {
			srcDirs = ['test']
		}
	}
}

int i = 0;
String classpathVar = configurations.compileClasspath.files.collect { " libs/" + (i++==0?String.format("%0\$-50s", it.getName()):String.format("%0\$-62s", it.getName()))   }.join(" ");
jar {
  manifest {
    attributes(
      'Class-Path': classpathVar,
      'Main-Class': mainClassName
    )
  }
}

dependencies {
  testImplementation group: 'junit', name: 'junit', version: '4.12'
}

task createDocs {
    def docs = file("$buildDir/docs")
    outputs.dir docs
    doLast {
        docs.mkdirs()
        new File(docs, "readme.txt").write("Read me!")
    }
}

distributions {
    main {
        contents {
            from(createDocs) {
                into "docs"
            }
        }
    }
}
